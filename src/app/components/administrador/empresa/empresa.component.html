<div class="container">
  <h1>Perfil de Empresa</h1>
  <form [formGroup]="companyForm" (ngSubmit)="updateCompanyInfo()">

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Nombre: <span class="required">*</span></mat-label>
      <input matInput id="nombre" formControlName="nombre" required />
      <mat-error
        *ngIf="companyForm.get('nombre')?.invalid && (companyForm.get('nombre')?.touched || companyForm.get('nombre')?.dirty)">
        El nombre es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Slogan:</mat-label>
      <input matInput id="slogan" formControlName="slogan" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Logo (URL):</mat-label>
      <input matInput id="logo" formControlName="logo" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Título de la Página:</mat-label>
      <input matInput id="titulo_pagina" formControlName="titulo_pagina" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Email: <span class="required">*</span></mat-label>
      <input matInput id="email" formControlName="email" required />
      <mat-error
        *ngIf="companyForm.get('email')?.invalid && (companyForm.get('email')?.touched || companyForm.get('email')?.dirty)">
        El email es obligatorio y debe ser válido.
      </mat-error>
    </mat-form-field>

    <fieldset formGroupName="direccion" class="address-fieldset">
      <legend>Dirección</legend>
      <div *ngFor="let field of ['calle', 'ciudad', 'estado', 'codigo_postal', 'pais']" class="form-group">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>{{ field.charAt(0).toUpperCase() + field.slice(1) }}: <span class="required">*</span></mat-label>
          <input matInput [id]="field" [formControlName]="field" required />
          <mat-error
            *ngIf="companyForm.get('direccion')?.get(field)?.invalid && (companyForm.get('direccion')?.get(field)?.touched || companyForm.get('direccion')?.get(field)?.dirty)">
            {{ field.charAt(0).toUpperCase() + field.slice(1) }} es obligatorio.
          </mat-error>
        </mat-form-field>
      </div>
    </fieldset>

    <fieldset formGroupName="telefono" class="phone-fieldset">
      <legend>Teléfono</legend>
      <div class="form-group">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Número: <span class="required">*</span></mat-label>
          <input matInput id="numero" formControlName="numero" required />
          <mat-error
            *ngIf="companyForm.get('telefono')?.get('numero')?.invalid && (companyForm.get('telefono')?.get('numero')?.touched || companyForm.get('telefono')?.get('numero')?.dirty)">
            El número es obligatorio.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-group">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Extensión:</mat-label>
          <input matInput id="extension" formControlName="extension" />
        </mat-form-field>
      </div>
    </fieldset>

    <fieldset formGroupName="redes_sociales" class="social-fieldset">
      <legend>Redes Sociales</legend>
      <div *ngFor="let platform of ['facebook', 'twitter', 'linkedin', 'instagram']" class="form-group">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>{{ platform.charAt(0).toUpperCase() + platform.slice(1) }}:</mat-label>
          <input matInput [id]="platform" [formControlName]="platform" />
        </mat-form-field>
      </div>
    </fieldset>

    <div class="actions">
      <button mat-button class="full-width" type="submit">
        Actualizar
      </button>
    </div>

    <div *ngIf="successMessage" class="success">{{ successMessage }}</div>
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
  </form>
</div>